<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>3D Navigation</title>
    <meta name="description" content="Diving3d" />
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="aframe.css" />
  </head>
  <body>
    <!-- <a-scene> -->
    <!-- <a-scene fog="type: linear; color: #1c689c; far: 30; near: 0"> -->
      <a-scene >
      <!-- Audio Dateien laden -->
      <a-assets>
        <a-asset-item id="boat" src="../boat/scene.gltf"></a-asset-item>
        <a-asset-item id="fish" src="../fish/scene.gltf"></a-asset-item>
        <a-asset-item id="seaweed" src="../sea_weed/scene.gltf"></a-asset-item>
        <a-asset-item id="ananas" src="../pineapple/scene.gltf"></a-asset-item>
        <a-asset-item id="stone" src="../rock/scene.gltf"></a-asset-item>
        <a-asset-item id="cave" src="../stonecave/scene.gltf"></a-asset-item>

        <audio id="sonar" src="./audio/audio.mp3"></audio>
        <audio id="water" src="./audio/underwateraudio.mp3"></audio>
        <img id="texture" src="./images/texture.jpg" />
        <img id="mask" src="./images/maske.png" />
      </a-assets>

      <!-- Object & Sonar Sound-->

      <a-entity gltf-model="../rock/scene.gltf" position="-64.43675 89.52383 73.25276" scale="20 20 20"> </a-entity>
      <a-entity gltf-model="../stonecave/scene.gltf" position="63.4204 -40.59543 29.40523" scale="0.03 0.03 0.03" rotation="-0.02 180 0">
      </a-entity>
      </a-entity>
      <a-entity gltf-model="#ananas" position="0 -40.5 0"> </a-entity>
      <a-entity gltf-model="#fish" position="0 0 -15"> 
        <a-sound
        id="directionSound"
        autoplay="true"
        loop="true"
        volume="0"
        sound="maxDistance:1;rolloffFactor:0"
        src="#sonar"
      ></a-sound>
      </a-entity>
      
      <a-entity
        gltf-model="../boat/scene.gltf"
        position="5.88132 -39.86348 -39.12481"
        scale="10 10 10"
        rotation=""
      >
      </a-entity>

      <a-entity
        gltf-model="../sea_weed/scene.gltf"
        position="0 -40.11241 -25.88036"
        scale="1.3 2.32 1.12"
      >
      </a-entity>
      <a-entity
        gltf-model="../sea_weed/scene.gltf"
        position="2.13756 -39.92395 -27.35634"
      >

      </a-entity>

      <!-- background water sound -->
      <a-sound
        autoplay="true"
        sound="positional:false"
        loop="true"
        volume="0"
        src="#water"
      ></a-sound>

      <a-entity>
        <a-camera look-controls wasd-controls="acceleration:400; fly:true">
          <a-cursor color="black"></a-cursor>

          <a-entity id="mask" position="0 0 -0.59">
            <a-entity>
              <a-image
                src="#mask"
                position="0 0 0"
                width="1.9"
                height="1.03"
              ></a-image>
            </a-entity>
          </a-entity>
        </a-camera>
      </a-entity>

      <!-- background image -->
      <a-sky id="image-360" radius="100" src="#texture"></a-sky>
      <!-- ground   material="fog: false"-->
      <a-plane
        src="./images/sand.jpg"
        position="0 -40 0"
        rotation="-90 0 0"
        width="200"
        height="200"
      ></a-plane>
      <!-- color="#051548" -->
      <!-- OberflÃ¤che -->

      <a-plane
        position="0 15 0"
        rotation="90 0 0"
        width="200"
        height="200"
        color="#BEDCF5"
      ></a-plane>
    </a-scene>

    <!-- Button -->
    <div class="controls">
      <button class="btn" data-text-swap="Sound on">
        Sound off
      </button>
    </div>
  </body>
  <script>
    //sound
    // var sound = document.querySelector("a-sound");
    var sound = document.getElementById('directionSound');
    //console.log(directionSound)

    var button = document.querySelector("button");
    button.addEventListener(
      "click",
      function () {
        if (button.getAttribute("data-text-swap") == button.innerHTML) {
          button.innerHTML = button.getAttribute("data-text-original");
          sound.setAttribute("volume", "1");
        } else {
          button.setAttribute("data-text-original", button.innerHTML);
          button.innerHTML = button.getAttribute("data-text-swap");
          sound.setAttribute("volume", "0");
        }
      },
      false
    );

    AFRAME.registerComponent("fogcolor", {
      dependencies: ["fog"],

      init: function () {
        this.el.setAttribute("fog", "color", getfogcolor());
      },
    });

    function getfogcolor() {
      const letters = "0123456789ABCDEF";
      var color = "#";
      for (var i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
      }
      return color;
    }
  </script>
</html>
